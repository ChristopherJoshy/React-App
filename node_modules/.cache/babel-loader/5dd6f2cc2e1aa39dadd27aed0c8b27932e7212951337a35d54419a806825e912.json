{"ast":null,"code":"import React,{useState,useEffect}from'react';import Timer from'./Timer';import{Howl}from'howler';// Helper function to decode HTML entities\nimport{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const decodeHTML=text=>{const textArea=document.createElement('textarea');textArea.innerHTML=text;return textArea.value;};const Quiz=_ref=>{let{data,onFinish,setScore,setTimeSpent}=_ref;const[currentQuestionIndex,setCurrentQuestionIndex]=useState(0);const[timeSpent,setQuizTimeSpent]=useState(0);const[isAnswered,setIsAnswered]=useState(false);const[animationClass,setAnimationClass]=useState('');const correctSound=new Howl({src:[`${process.env.PUBLIC_URL}/sounds/correct.mp3`]});const incorrectSound=new Howl({src:[`${process.env.PUBLIC_URL}/sounds/incorrect.mp3`]});const handleAnswer=answer=>{if(isAnswered)return;setIsAnswered(true);if(answer===data.questions[currentQuestionIndex].correct){setScore(prevScore=>prevScore+1);correctSound.play();}else{incorrectSound.play();}handleNextQuestion();};const handleNextQuestion=()=>{setAnimationClass('fade-out');setTimeout(()=>{setAnimationClass('');if(currentQuestionIndex<data.questions.length-1){setCurrentQuestionIndex(prevIndex=>prevIndex+1);setIsAnswered(false);}else{onFinish();}},300);};useEffect(()=>{const timer=setInterval(()=>{setQuizTimeSpent(prevTime=>prevTime+1);setTimeSpent(prevTime=>prevTime+1);},1000);return()=>clearInterval(timer);},[setTimeSpent]);return/*#__PURE__*/_jsxs(\"div\",{className:`quiz animated ${animationClass}`,children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Question \",currentQuestionIndex+1,\"/\",data.questions.length]}),/*#__PURE__*/_jsx(\"p\",{children:decodeHTML(data.questions[currentQuestionIndex].question)}),/*#__PURE__*/_jsx(Timer,{timeSpent:timeSpent}),/*#__PURE__*/_jsx(\"div\",{className:\"choices\",children:data.questions[currentQuestionIndex].answers.map((answer,index)=>/*#__PURE__*/// Decode the answers before displaying them\n_jsx(\"button\",{onClick:()=>handleAnswer(answer),disabled:isAnswered,children:decodeHTML(answer)},index))})]});};export default Quiz;","map":{"version":3,"names":["React","useState","useEffect","Timer","Howl","jsxs","_jsxs","jsx","_jsx","decodeHTML","text","textArea","document","createElement","innerHTML","value","Quiz","_ref","data","onFinish","setScore","setTimeSpent","currentQuestionIndex","setCurrentQuestionIndex","timeSpent","setQuizTimeSpent","isAnswered","setIsAnswered","animationClass","setAnimationClass","correctSound","src","process","env","PUBLIC_URL","incorrectSound","handleAnswer","answer","questions","correct","prevScore","play","handleNextQuestion","setTimeout","length","prevIndex","timer","setInterval","prevTime","clearInterval","className","children","question","answers","map","index","onClick","disabled"],"sources":["/workspaces/React-App/src/components/Quiz.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Timer from './Timer';\nimport { Howl } from 'howler';\n\n// Helper function to decode HTML entities\nconst decodeHTML = (text) => {\n    const textArea = document.createElement('textarea');\n    textArea.innerHTML = text;\n    return textArea.value;\n};\n\nconst Quiz = ({ data, onFinish, setScore, setTimeSpent }) => {\n    const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);\n    const [timeSpent, setQuizTimeSpent] = useState(0);\n    const [isAnswered, setIsAnswered] = useState(false);\n    const [animationClass, setAnimationClass] = useState('');\n\n    const correctSound = new Howl({\n        src: [`${process.env.PUBLIC_URL}/sounds/correct.mp3`],\n    });\n\n    const incorrectSound = new Howl({\n        src: [`${process.env.PUBLIC_URL}/sounds/incorrect.mp3`],\n    });\n\n    const handleAnswer = (answer) => {\n        if (isAnswered) return;\n        setIsAnswered(true);\n\n        if (answer === data.questions[currentQuestionIndex].correct) {\n            setScore(prevScore => prevScore + 1);\n            correctSound.play();\n        } else {\n            incorrectSound.play();\n        }\n\n        handleNextQuestion();\n    };\n\n    const handleNextQuestion = () => {\n        setAnimationClass('fade-out');\n        setTimeout(() => {\n            setAnimationClass('');\n            if (currentQuestionIndex < data.questions.length - 1) {\n                setCurrentQuestionIndex(prevIndex => prevIndex + 1);\n                setIsAnswered(false);\n            } else {\n                onFinish();\n            }\n        }, 300);\n    };\n\n    useEffect(() => {\n        const timer = setInterval(() => {\n            setQuizTimeSpent(prevTime => prevTime + 1);\n            setTimeSpent(prevTime => prevTime + 1);\n        }, 1000);\n\n        return () => clearInterval(timer);\n    }, [setTimeSpent]);\n\n    return (\n        <div className={`quiz animated ${animationClass}`}>\n            <h2>Question {currentQuestionIndex + 1}/{data.questions.length}</h2>\n            {/* Decode the question text */}\n            <p>{decodeHTML(data.questions[currentQuestionIndex].question)}</p>\n            <Timer timeSpent={timeSpent} />\n            <div className=\"choices\">\n                {data.questions[currentQuestionIndex].answers.map((answer, index) => (\n                    // Decode the answers before displaying them\n                    <button key={index} onClick={() => handleAnswer(answer)} disabled={isAnswered}>\n                        {decodeHTML(answer)}\n                    </button>\n                ))}\n            </div>\n        </div>\n    );\n};\n\nexport default Quiz;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}